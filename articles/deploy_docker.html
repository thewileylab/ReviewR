<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ReviewR">
<title>Docker Deployment • ReviewR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Docker Deployment">
<meta property="og:description" content="ReviewR">
<meta property="og:image" content="reviewr.thewileylab.org/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ReviewR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.3.10</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-deploying-reviewr">Deploying ReviewR</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-deploying-reviewr">
    <a class="dropdown-item" href="../articles/deploy_local.html">Local Deployment</a>
    <a class="dropdown-item" href="../articles/deploy_server.html">Shiny Server Deployment</a>
    <a class="dropdown-item" href="../articles/deploy_docker.html">Docker Deployment</a>
    <a class="dropdown-item" href="../articles/deploy_bigquery.html">Google BigQuery Deployment</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-using-reviewr">Using ReviewR</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-using-reviewr">
    <a class="dropdown-item" href="../articles/usage_connect_to_record_database.html">Connect to Patient Record Database</a>
    <a class="dropdown-item" href="../articles/usage_connect_to_redcap.html">Connect to REDCap</a>
    <a class="dropdown-item" href="../articles/usage_perform_chart_review.html">Perform A Chart Review</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-customizing-reviewr">Customizing ReviewR</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-customizing-reviewr">
    <a class="dropdown-item" href="../articles/customize_support_new_rdbms.html">Support a New Relational Database Management System</a>
    <a class="dropdown-item" href="../articles/customize_support_new_data_model.html">Support a Custom Data Model</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/thewileylab/ReviewR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Docker Deployment</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/thewileylab/ReviewR/blob/HEAD/vignettes/deploy_docker.Rmd" class="external-link"><code>vignettes/deploy_docker.Rmd</code></a></small>
      <div class="d-none name"><code>deploy_docker.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>ReviewR is containerized! Users who are less familiar with R, would
like to avoid any potential conflicts with existing packages or
services, or simply do not want to manage their own R Environment may
wish to utilize the containerized version of ReviewR. A Dockerfile may
be obtained from the ReviewR package to build, run, and deploy ReviewR
in your local or server environment.</p>
</div>
<div class="section level2">
<h2 id="docker-desktop">Docker Desktop<a class="anchor" aria-label="anchor" href="#docker-desktop"></a>
</h2>
<div class="section level3">
<h3 id="install-docker-desktop">Install Docker Desktop<a class="anchor" aria-label="anchor" href="#install-docker-desktop"></a>
</h3>
<p>Install the version of Docker Desktop that is appropriate for you
operating system. Downloads and configuration instructions may be
obtained at the following link:</p>
<ul>
<li><a href="https://docs.docker.com/desktop/" class="external-link uri">https://docs.docker.com/desktop/</a></li>
</ul>
</div>
<div class="section level3">
<h3 id="run-reviewr-from-docker">Run ReviewR from Docker<a class="anchor" aria-label="anchor" href="#run-reviewr-from-docker"></a>
</h3>
<div class="section level4">
<h4 id="download">Download<a class="anchor" aria-label="anchor" href="#download"></a>
</h4>
<p>After Docker Desktop has been installed for your operating system we
need to obtain the ReviewR source code. Open an R console and fork the
ReviewR repository with the <code>usethis</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages('usethis')</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/create_from_github.html" class="external-link">create_from_github</a></span><span class="op">(</span>repo_spec <span class="op">=</span> <span class="st">'thewileylab/ReviewR'</span><span class="op">)</span></span></code></pre></div>
<p><em>This step will fork the most recent version of the ReviewR
package from GitHub into your working directory which includes
additional files and development tools not built directly into the
package. This includes an <code>Dockerfile</code> which will be used to
create a ReviewR container.</em></p>
<p>If R is not available on the system you are using, the package source
may also be obtained via the following URL:</p>
<ul>
<li><a href="https://github.com/thewileylab/ReviewR/archive/master.zip" class="external-link uri">https://github.com/thewileylab/ReviewR/archive/master.zip</a></li>
</ul>
</div>
<div class="section level4">
<h4 id="build-reviewr">Build ReviewR<a class="anchor" aria-label="anchor" href="#build-reviewr"></a>
</h4>
<p>Using the command line for your operating system, navigate to the
location containing the forked the repository. For this example, the
Dockerfile should reside in a ReviewR folder within your working
directory from the previous section.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ReviewR</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> reviewr .</span></code></pre></div>
<p>This will grab all of the dependencies ReviewR requires from the
internet and build a Docker image for your system. It may take a while,
so grab a cup of coffee… possibly a meal.</p>
</div>
<div class="section level4">
<h4 id="run-reviewr">Run ReviewR<a class="anchor" aria-label="anchor" href="#run-reviewr"></a>
</h4>
<p>After the Docker image has been created, you are ready to run ReviewR
on your local system:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--publish</span> 1410:1410 <span class="at">--detach</span> <span class="at">--name</span> ReviewR reviewr:latest</span></code></pre></div>
<p>That’s it! ReviewR can now be accessed from your browser at
<code>http://localhost:1410</code>.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="server">Server<a class="anchor" aria-label="anchor" href="#server"></a>
</h2>
<p>If you wish to support multiple concurrent users, ReviewR may also be
hosted on your server running Docker. This guide will help you to
install Docker, start a Shiny Server container, and serve the ReviewR
application securely with NGINX.</p>
<p>This following guide is for server systems running Ubuntu 18.04.
Docker installation instructions have been adapted from:</p>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-18-04" class="external-link uri">https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-18-04</a></li>
</ul>
<div class="section level3">
<h3 id="docker-installation">Docker Installation<a class="anchor" aria-label="anchor" href="#docker-installation"></a>
</h3>
<div class="section level4">
<h4 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h4>
<p>In order to make sure that the latest version of Docker is installed,
we will add Docker’s official repository to the software manger for you
server. To begin, SSH into your system and run:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install apt-transport-https ca-certificates curl software-properties-common</span></code></pre></div>
<p>This will install software packages that are required to add the
Docker repository to your system.</p>
<p>Next, we’ll add a GPG key for the official Docker repository to your
system. A GPG key helps ensure that this repository is serving
legitimate software over an https connection. To add the key, run:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="kw">|</span> <span class="fu">sudo</span> apt-key add <span class="at">-</span></span></code></pre></div>
<p>Finally, we can add the Docker repository to our system:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="st">"deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable"</span></span></code></pre></div>
<p>With the Docker repository added, we can now install Docker Community
Edition to our server:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install docker-ce</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="docker-configuration-optional">Docker Configuration (Optional)<a class="anchor" aria-label="anchor" href="#docker-configuration-optional"></a>
</h4>
<p>When first installed, docker commands can only be run by a root user.
Depending on your configuration, this may not be desirable behavior. If
you would like to be able to run Docker commands as a normal user, some
additional configuration is required.</p>
<p>First, we’ll need to add the active user to the “docker” group on the
system. This can be accomplished by running:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> usermod <span class="at">-aG</span> docker <span class="va">${USER}</span></span></code></pre></div>
<p>In order for this group membership to take effect, you’ll have to log
out of the system and then log back in.</p>
<p>If instead, you’d like to run docker commands as a different user on
the system (not the active user), simply specify the user rather than
using the <code>${USER}</code> variable in the previous command:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> usermod <span class="at">-aG</span> docker adeline</span></code></pre></div>
<p>Docker is now configured!</p>
</div>
</div>
<div class="section level3">
<h3 id="build-shiny-server-container">Build Shiny Server Container<a class="anchor" aria-label="anchor" href="#build-shiny-server-container"></a>
</h3>
<p>In order to facilitate multiple concurrent users, a Shiny Server
container will need to be built, including all of the dependencies that
ReviewR requires. With docker already installed, build a suitable Docker
image using a Dockerfile contained in the ReviewR source. To begin this
process, we need to make a directory to hold the ReviewR
application:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> ~/srv/shinyapps</span></code></pre></div>
<p>Next, clone the ReviewR source from GitHub:</p>
<ul>
<li>If R is installed, we can fork the ReviewR package from an R console
with the <code>usethis</code> package:</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages('usethis')</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/create_from_github.html" class="external-link">create_from_github</a></span><span class="op">(</span>repo_spec <span class="op">=</span> <span class="st">'thewileylab/ReviewR'</span>, destdir <span class="op">=</span> <span class="st">'~/srv/shinyapps'</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Otherwise, clone from GitHub using the git commands in a bash
terminal:</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/srv/shinyapps</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/thewileylab/ReviewR </span></code></pre></div>
<p>Finally, build the Shiny Server container using the Dockerfile
contained in the ReviewR repository:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/srv/shinyapps/ReviewR/Docker_ShinyServer</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> shiny-server_reviewr .</span></code></pre></div>
<p>Take a quick break while the container image is built. You deserve
it!</p>
<p>Once the image has finished building, we can start the container:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">-p</span> 3838:3838 <span class="dt">\</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">-v</span> ~/srv/shinyapps/:/srv/shiny-server/ <span class="dt">\</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">-v</span> ~/srv/shinylog/:/var/log/shiny-server/ <span class="dt">\</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    shiny-server_reviewr:latest</span></code></pre></div>
<p>A Shiny Server container should start and begin serving any
applications located in the <code>~/srv/shinyapps</code> directory on
your system. As ReviewR has been cloned to this directory it should now
be accessible via the web at:
<code>http://server.ip.address:3838/ReviewR</code></p>
<p>In order to securely host this container at a URL, we’ll need to
configure NGINX to reverse proxy this container with a Let’s Encrypt
Certificate. Read on to see how.</p>
</div>
</div>
<div class="section level2">
<h2 id="configuring-nginx-to-reverse-proxy-reviewr-docker-container">Configuring NGINX to Reverse Proxy ReviewR Docker Container<a class="anchor" aria-label="anchor" href="#configuring-nginx-to-reverse-proxy-reviewr-docker-container"></a>
</h2>
<p>To serve your ReviewR Docker container with NGINX, we simply need to
add and enable a server block, then secure it with the Certbot software
which will install and configure a certificate from Let’s Encrypt. For
information about how to obtain a domain and how to install NGINX, and
Certbot please see <code><a href="../articles/deploy_server.html">vignette('deploy_server')</a></code>.</p>
<div class="section level3">
<h3 id="configure-nginx">Configure nginx<a class="anchor" aria-label="anchor" href="#configure-nginx"></a>
</h3>
<p>Next, we need to configure NGINX to proxy traffic from web clients to
the Docker Container. To accomplish this, we’ll need to add a server
block to NGINX with information about our container. NGINX server blocks
live in <code>/etc/nginx/sites-available/</code>. To initialize a server
block for our container, issue the following command:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">## substitute nano for your preferred text editor: emacs, jed, joe, pico, sandy, vi, vim, etc.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nano /etc/nginx/sites-available/shiny-server_reviewr</span></code></pre></div>
<p>Modify the following server block code by replacing
<code>shiny.your.domain.url</code> with the domain name that own. Then,
copy this text into the file that you are editing. In this example, a
sub domain of “shiny” is prepended to the server domain, though your
specific configuration may vary.</p>
<pre><code>server {
  server_name   shiny.your.domain.url;

  location / {
    proxy_pass  http://localhost:3838;
  }
}</code></pre>
<p><strong>Save and exit the file.</strong> Verify that the has been
created successfully by running:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-l</span> /etc/nginx/sites-available</span></code></pre></div>
<p>A file called “shiny-server_reviewr” should be among the files that
is returned.</p>
<p>Next, we need to enable the server block that we just created. With
NGINX, this is accomplished by symlinking the server block to the
<code>/etc/nginx/sites-enabled</code> folder. Run:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /etc/nginx/sites-available/shiny-server_reviewr /etc/nginx/sites-enabled/shiny-server_reviewr</span></code></pre></div>
<p>At this point, your Shiny Server should be accessible at
<code>http://shiny.your.domain.url/ReviewR</code> . If the ReviewR
Docker Container is not immediately available at your domain after
completing all of the steps to this point, you may have to restart
NGINX; <code>sudo systemctl reload nginx</code></p>
<p>Continue to the next section to secure access to your container with
Let’s Encrypt.</p>
</div>
<div class="section level3">
<h3 id="securing-docker-container-with-lets-encrypt">Securing Docker Container with Let’s Encrypt
<a id="lets-encrypt"></a><a class="anchor" aria-label="anchor" href="#securing-docker-container-with-lets-encrypt"></a>
</h3>
<p>This portion of the guide assumes that you have already installed
Certbot on your system by following the instructions in
<code><a href="../articles/deploy_server.html">vignette('deploy_server')</a></code>.</p>
<p>As we have already configured a server block for our container in the
previous section, we are ready to run the Certbot software to secure our
domain. Run the following code block, substituting
<code>shiny.your.domain.url</code> with the domain that you configured
in the nginx server block for the ReviewR container:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> certbot <span class="at">--nginx</span> <span class="at">-d</span> shiny.your.domain.url</span></code></pre></div>
<p>If this is your first time running Certbot, you will be prompted to
enter an email address and agree to the terms of service. After doing
so, Certbot will initiate a connection with the Let’s Encrypt server and
then begin testing your server to verify that you control the domain
you’re requesting a certificate for. Certbot will then ask you whether
or not you’d like to redirect all HTTP traffic to HTTPS traffic. It is
<em>highly recommended</em> to do so. Please select the option for
‘Redirect’, which will ensure that users are <em>only</em> capable of
accessing your site via secure HTTPS.</p>
<p>Congratulations, your ReviewR container is now secured and ready to
accessed securely via <code>https://reviewr.your.domain.url</code> !</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Laura Wiley, Luke Rasmussen, David Mayer, <a href="https://www.thewileylab.org/" class="external-link"><img src="https://raw.githubusercontent.com/thewileylab/ReviewR/master/man/figures/WileyLab.svg" height="24"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
