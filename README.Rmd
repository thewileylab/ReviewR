---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# ReviewR: A light-weight, portable tool for reviewing individual patient records

<!-- badges: start -->
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.1488535.svg)](https://doi.org/10.5281/zenodo.1488535)
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
<!-- badges: end -->

ReviewR is a portable Shiny tool to help you explore patient data across different data models. Within ReviewR, you can browse data stored in either the OMOP or MIMIC-III data model.

In addition to viewing patient data, you may also connect to a REDCap project to perform a chart review.

Currently, ReviewR will connect to Google BigQuery as a database back-end, with support planned for:

  * PostgreSQL
  * SQL Server
  * others supported by the dbplyr back-end (https://dbplyr.tidyverse.org/)

## Installation

To install the latest development release:
```{r eval=FALSE}
# install.packages('usethis')
usethis::create_from_github("thewileylab/ReviewR")
```

## Shiny Server Deployment
ReviewR can optionally be deployed to a Shiny Server. Follow the [Shiny Server Quick Start Guide](https://support.rstudio.com/hc/en-us/articles/360011458854-Shiny-Server-Quick-Start-Installation-and-Configuration) to get Shiny Server up and running. After cloning the repository as described above to your server, symlink the ReviewR directory to `/srv/shiny-server/ReviewR`. Note, for Google Authentication to work, your server must have a fully qualified domain name and link to a Google Project that you own to perform authorization. 

## Usage
To run the application from your local machine:
```{r, eval=FALSE}
shiny::runApp('app.R', port = 8100)
```

Once the app has loaded, please complete the 'Setup' tab (found in the left navigation menu) to connect to your patient database and optionally connect to a REDCap project.

### View Mode

Complete the database setup to connect to EHR data stored in MIMIC-III or OMOP format. For BigQuery connections, simply press "Sign in with Google" and you will be redirected to authenticate with Google. Once successfully connected to a patient database, the 'Patient Search' tab will appear. Select the patient you wish to view, and you will be taken to a pre-coordinated table containing EHR data for that patient. Navigate through patients using the previous and next buttons or select form the dropdown on the 'Chart Review' tab. At any time, you may return to the 'Patient Search' tab to select a different patient. Patient information globally within each tab or by a particular column. Searching via regex is also supported.

### Review Mode

Optionally, you may connect to a REDCap project to store manual review information. On the setup tab, enter your institution's REDCap URL and an API token for a REDCap project. This project may contain multiple REDCap instruments for data collection which are selectable from the Setup interface. Once connected, please select the REDCap field that contains your patient information as well as the field that will contain reviewer information. Enter your name to keep track of who has completed the review.

Now, after selecting a patient from the 'Patient Search' tab, your REDCap instrument will appear next to the patient identifier information on the 'Chart Review' tab. Fill in desired information and click the 'Upload to REDCap' button to store your information in the REDCap project. 

## Disclaimer
This is a work in progress and thus there are no guarantees of functionality or accuracy. Use at your own risk.

## Getting help

If you encounter bugs, errors, issues or other general unpleasantness, please let us know on [GitHub](https://github.com/thewileylab/ReviewR/issues).

---
Please note that the 'ReviewR' project is released with a [Contributor Code of Conduct](CODE_OF_CONDUCT.md). By contributing to this project, you agree to abide by its terms.
